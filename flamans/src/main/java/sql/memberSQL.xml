<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="flamans.member">
	<insert id="member_join" parameterType="flamans.member.model.MemberDTO">
		insert into
			fm_member
		values(
			#{m_name},
			#{m_sex},
			#{m_birthday},
			#{m_nationality},
			#{m_id},
			#{m_pwd},
			#{m_email},
			#{m_tel},
			null,
			null			
		)
	</insert>
	
	<select id="member_check_id" parameterType="String" resultType="int">
		select count(m_id) 
		from fm_member
		where m_id=#{m_id}
	</select>
	
	<select id="member_find_id" parameterType="Map" resultType="flamans.member.model.MemberDTO">
	 select m_id, m_name
	 from 
	 	fm_member
	 where 
	 	m_name=#{m_name} and m_email=#{m_email}
	</select>
	
	<update id="member_update_pwd" parameterType="Map" >
	 update fm_member
	 set 
	 	 m_pwd=#{m_pwd} 
	 where 
	 	m_id=#{m_id} and m_email=#{m_email}
	</update>

	<select id="logInCheck" parameterType="String" resultType="flamans.member.model.MemberDTO">
		select 
			*
		from 
			fm_member
		where
			m_id=#{m_id}
	</select>
	
	<update id="member_update_wishlist" parameterType="Map" >
	 update fm_member
	 set 
	 	 m_wishlist=#{m_wishlist} 
	 where 
	 	m_id=#{m_id}
	</update>
	
	<delete id="member_out" parameterType="Map">
		delete from fm_member
		where m_id=#{m_id} and m_pwd=#{m_pwd}
	</delete>
	
	<update id="member_update" parameterType="flamans.member.model.MemberDTO">
		update fm_member
		set
			m_name=#{m_name},
			m_sex=#{m_sex},
			m_birthday=#{m_birthday}, 
			m_nationality=#{m_nationality},
			m_email=#{m_email},
			m_tel=#{m_tel}
		where
			m_id=#{m_id}
	</update>
	<select id="member_myqna" parameterType="String" resultType="flamans.qna.model.QnaDTO">
		select * from fm_qna where qna_writer = #{qna_writer}
	</select>
	
</mapper>